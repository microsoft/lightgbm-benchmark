
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.4.2">
    
    
      
        <title>Inferencing - LightGBM-Benchmark</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#run-inferencing-benchmark-pipeline-and-analyze-results" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="LightGBM-Benchmark" class="md-header__button md-logo" aria-label="LightGBM-Benchmark" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LightGBM-Benchmark
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Inferencing
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Microsoft/lightgbm-benchmark" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="LightGBM-Benchmark" class="md-nav__button md-logo" aria-label="LightGBM-Benchmark" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    LightGBM-Benchmark
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Microsoft/lightgbm-benchmark" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../lightgbm-benchmark-project/" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Contribute
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Contribute" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Contribute
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../contribute/developer-guide/" class="md-nav__link">
        Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../contribute/architecture-guide/" class="md-nav__link">
        Architecture Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../contribute/reporting-guide/" class="md-nav__link">
        Reporting Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Run
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Run" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Run
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        Install
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../manual-benchmark/" class="md-nav__link">
        Run manually
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" type="checkbox" id="__nav_4_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_3">
          Run in AzureML
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Run in AzureML" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Run in AzureML
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../azure-setup/" class="md-nav__link">
        Azure Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../local-setup/" class="md-nav__link">
        Local Setup
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3_3" type="checkbox" id="__nav_4_3_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_3_3">
          Benchmark Pipelines
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Benchmark Pipelines" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_3_3">
          <span class="md-nav__icon md-icon"></span>
          Benchmark Pipelines
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../generate-synthetic-data/" class="md-nav__link">
        Generate data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../benchmark-training/" class="md-nav__link">
        Training
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Inferencing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Inferencing
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#check-out-the-inferencing-configuration" class="md-nav__link">
    Check out the inferencing configuration
  </a>
  
    <nav class="md-nav" aria-label="Check out the inferencing configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#list-of-inferencing-tasks" class="md-nav__link">
    List of inferencing tasks
  </a>
  
    <nav class="md-nav" aria-label="List of inferencing tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-use-a-named-registered-dataset" class="md-nav__link">
    Option 1 : use a named registered dataset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-use-a-datastore-path" class="md-nav__link">
    Option 2 : use a datastore + path
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-of-inferencing-tasks_1" class="md-nav__link">
    List of inferencing tasks
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-the-pipeline" class="md-nav__link">
    Run the pipeline
  </a>
  
    <nav class="md-nav" aria-label="Run the pipeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-a-partial-benchmark-for-testing" class="md-nav__link">
    Running a partial benchmark for testing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-full-benchmark-pipeline" class="md-nav__link">
    Running the FULL benchmark pipeline
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analyze-the-results-of-a-full-run" class="md-nav__link">
    Analyze the results of a full run
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3_4" type="checkbox" id="__nav_4_3_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_3_4">
          Custom Pipelines
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Custom Pipelines" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_3_4">
          <span class="md-nav__icon md-icon"></span>
          Custom Pipelines
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../upload-your-data/" class="md-nav__link">
        Upload your data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../train-on-your-data/" class="md-nav__link">
        Train on your data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../designer-ui/" class="md-nav__link">
        Designer UI
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Results
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Results" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Results
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../results/inferencing/" class="md-nav__link">
        Inferencing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../results/manual/" class="md-nav__link">
        Manual
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Reference Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference Docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Reference Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1">
          src/common/
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="src/common/" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          src/common/
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/common/aml/" class="md-nav__link">
        aml.py
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/common/components/" class="md-nav__link">
        components.py
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/common/io/" class="md-nav__link">
        io.py
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/common/lightgbm_utils/" class="md-nav__link">
        lightgbm_utils.py
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/common/metrics/" class="md-nav__link">
        metrics.py
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/common/perf/" class="md-nav__link">
        perf.py
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/common/tasks/" class="md-nav__link">
        tasks.py
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_2" type="checkbox" id="__nav_6_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_2">
          src/scripts/
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="src/scripts/" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          src/scripts/
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/scripts/sample/sample/" class="md-nav__link">
        sample/sample.py
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/scripts/training/lightgbm_python/" class="md-nav__link">
        training/lightgbm_python/
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#check-out-the-inferencing-configuration" class="md-nav__link">
    Check out the inferencing configuration
  </a>
  
    <nav class="md-nav" aria-label="Check out the inferencing configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#list-of-inferencing-tasks" class="md-nav__link">
    List of inferencing tasks
  </a>
  
    <nav class="md-nav" aria-label="List of inferencing tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-use-a-named-registered-dataset" class="md-nav__link">
    Option 1 : use a named registered dataset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-use-a-datastore-path" class="md-nav__link">
    Option 2 : use a datastore + path
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-of-inferencing-tasks_1" class="md-nav__link">
    List of inferencing tasks
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-the-pipeline" class="md-nav__link">
    Run the pipeline
  </a>
  
    <nav class="md-nav" aria-label="Run the pipeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-a-partial-benchmark-for-testing" class="md-nav__link">
    Running a partial benchmark for testing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-full-benchmark-pipeline" class="md-nav__link">
    Running the FULL benchmark pipeline
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analyze-the-results-of-a-full-run" class="md-nav__link">
    Analyze the results of a full run
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/Microsoft/lightgbm-benchmark/edit/main/docs/run/azureml/benchmark-inferencing.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="run-inferencing-benchmark-pipeline-and-analyze-results">Run inferencing benchmark pipeline and analyze results</h1>
<p><strong>Objectives</strong> - By following this tutorial, you will be able to:</p>
<ul>
<li>run lightgbm inferencing on multiple datasets with multiple configuration variants</li>
</ul>
<p><strong>Requirements</strong> - To enjoy this tutorial, you need to:</p>
<ul>
<li>have an existing <a href="../azure-setup/">AzureML workspace with relevant compute resource</a>.</li>
<li>have <a href="../local-setup/">setup your local environment</a> to run our benchmarking pipelines.</li>
<li>if you plan to use your own data, you'll need to <a href="../upload-your-data/">upload custom inferencing data and model</a> into your AzureML workspace</li>
<li>if you plan to use synthetic data, you should first <a href="../generate-synthetic-data/">run the data generation pipeline</a> and the <a href="../benchmark-training/">training benchmark pipeline</a></li>
</ul>
<h2 id="check-out-the-inferencing-configuration">Check out the inferencing configuration</h2>
<p>Open the file under <code>conf/experiments/lightgbm-inferencing.yaml</code>. It contains in particular a section <code>lightgbm_inferencing_config</code> that we will look more closely in this section.</p>
<p>The following yaml section contains the parameters to run in parallel several inferencing variants on a given set of inferencing data and models.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="nt">experiment</span><span class="p">:</span>
<span class="linenos" data-linenos=" 2 "></span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;lightgbm_inferencing_dev&quot;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="nt">lightgbm_inferencing_config</span><span class="p">:</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">  </span><span class="c1"># name of your particular benchmark</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">  </span><span class="nt">benchmark_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;benchmark-dev&quot;</span><span class="w"> </span><span class="c1"># override this with a unique name</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">  </span><span class="c1"># list all the data/model pairs to run inferencing with</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
<span class="linenos" data-linenos="10 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">data</span><span class="p">:</span>
<span class="linenos" data-linenos="11 "></span><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data-synthetic-regression-100cols-10000samples-inference&quot;</span>
<span class="linenos" data-linenos="12 "></span><span class="w">      </span><span class="nt">model</span><span class="p">:</span>
<span class="linenos" data-linenos="13 "></span><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;model-synthetic-regression-100cols-10trees-31leaves&quot;</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span><span class="w">  </span><span class="c1"># list all inferencing frameworks and their builds</span>
<span class="linenos" data-linenos="16 "></span><span class="w">  </span><span class="nt">variants</span><span class="p">:</span>
<span class="linenos" data-linenos="17 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lightgbm_python</span><span class="w"> </span><span class="c1"># v3.3.0 via pypi</span>
<span class="linenos" data-linenos="18 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lightgbm_c_api</span><span class="w"> </span><span class="c1"># v3.3.0 with C API prediction</span>
<span class="linenos" data-linenos="19 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lightgbm_c_api</span><span class="w"> </span><span class="c1"># v3.3.0 with C API prediction</span>
<span class="linenos" data-linenos="20 "></span><span class="w">      </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker/lightgbm-custom/v330_patch_cpu_mpi_build.dockerfile</span>
<span class="linenos" data-linenos="21 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lightgbm_c_api</span><span class="w"> </span><span class="c1"># v3.2.1 with C API prediction</span>
<span class="linenos" data-linenos="22 "></span><span class="w">      </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker/lightgbm-v3.2.1/linux_cpu_mpi_build.dockerfile</span>
<span class="linenos" data-linenos="23 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lightgbm_c_api</span><span class="w"> </span><span class="c1"># v3.2.1 with C API prediction</span>
<span class="linenos" data-linenos="24 "></span><span class="w">      </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker/lightgbm-custom/v321_patch_cpu_mpi_build.dockerfile</span>
<span class="linenos" data-linenos="25 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">treelite_python</span><span class="w"> </span><span class="c1"># v1.3.0</span>
</code></pre></div>
<h3 id="list-of-inferencing-tasks">List of inferencing tasks</h3>
<p>The configuration consists in listing <code>tasks</code> which are made of pairs of <code>data</code> and <code>model</code>. You have two possibilities here:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This actually corresponds to dataclasses <code>inferencing_task</code> and <code>data_input_spec</code> detailed in <a href="../../../references/common/tasks/">src/common/tasks.py</a>.</p>
</div>
<h4 id="option-1-use-a-named-registered-dataset">Option 1 : use a named registered dataset</h4>
<p>If your data and model have been uploaded (or generated) and registered as datasets in AzureML, you can provide the name for each :</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">data</span><span class="p">:</span>
<span class="linenos" data-linenos="2 "></span><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;data-synthetic-regression-100cols-10000samples-inference&quot;</span>
<span class="linenos" data-linenos="3 "></span><span class="w">      </span><span class="nt">model</span><span class="p">:</span>
<span class="linenos" data-linenos="4 "></span><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;model-synthetic-regression-100cols-10trees-31leaves&quot;</span>
</code></pre></div>
<p>Datasets have versions in AzureML. You can specify which version you want to use under <code>data</code> by adding a <code>version:</code> field.</p>
<h4 id="option-2-use-a-datastore-path">Option 2 : use a datastore + path</h4>
<p>If your data or model is stored in an external storage, attached to your workspace as a datastore, you can provide the path to the data (works with model as well) :</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">data</span><span class="p">:</span>
<span class="linenos" data-linenos="2 "></span><span class="w">        </span><span class="nt">datastore</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;externalstorage&quot;</span>
<span class="linenos" data-linenos="3 "></span><span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/custom/test/inferencing/data.txt&quot;</span>
<span class="linenos" data-linenos="4 "></span><span class="w">      </span><span class="nt">model</span><span class="p">:</span>
<span class="linenos" data-linenos="5 "></span><span class="w">        </span><span class="nt">datastore</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;externalstorage&quot;</span>
<span class="linenos" data-linenos="6 "></span><span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/custom/test/model/model100trees.txt&quot;</span>
</code></pre></div>
<h3 id="list-of-inferencing-tasks_1">List of inferencing tasks</h3>
<p>For each task, the pipeline will run inferencing "variants", which are different frameworks you can compare.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This actually corresponds to dataclass <code>inferencing_variants</code> detailed in <a href="../../../references/common/tasks/">src/common/tasks.py</a>.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="w">  </span><span class="c1"># list all inferencing frameworks and their builds</span>
<span class="linenos" data-linenos=" 2 "></span><span class="w">  </span><span class="nt">variants</span><span class="p">:</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lightgbm_python</span><span class="w"> </span><span class="c1"># v3.3.0 via pypi</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lightgbm_c_api</span><span class="w"> </span><span class="c1"># v3.3.0 with C API prediction</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lightgbm_c_api</span><span class="w"> </span><span class="c1"># v3.3.0 with C API prediction</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">      </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker/lightgbm-custom/v330_patch_cpu_mpi_build.dockerfile</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lightgbm_c_api</span><span class="w"> </span><span class="c1"># v3.2.1 with C API prediction</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">      </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker/lightgbm-v3.2.1/linux_cpu_mpi_build.dockerfile</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lightgbm_c_api</span><span class="w"> </span><span class="c1"># v3.2.1 with C API prediction</span>
<span class="linenos" data-linenos="10 "></span><span class="w">      </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docker/lightgbm-custom/v321_patch_cpu_mpi_build.dockerfile</span>
<span class="linenos" data-linenos="11 "></span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">framework</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">treelite_python</span><span class="w"> </span><span class="c1"># v1.3.0</span>
</code></pre></div>
<p>We only support a limited set of frameworks. Each framework should correspond to a folder under <code>src/scripts/inferencing/</code>. For those of those framework, the pipeline will automatically add model transformation steps (ex: treelite needs to pre-compile the model).</p>
<p>For each framework, you can override the build by specifying a dockerfile under the <code>build:</code> field. The path to this docker is relative to the repository root.</p>
<h2 id="run-the-pipeline">Run the pipeline</h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For this section, we'll use <code>custom</code> as the name for the AzureML reference config files you created during <a href="../local-setup/">local setup</a>.</p>
</div>
<h3 id="running-a-partial-benchmark-for-testing">Running a partial benchmark for testing</h3>
<p>Running the pipeline consists in launching a python script with the pipeline configuration file.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>python<span class="w"> </span>src/pipelines/azureml/lightgbm_inferencing.py<span class="w"> </span>--exp-config<span class="w"> </span>conf/experiments/lightgbm-inferencing.yaml
</code></pre></div>
<p>The python script will build a pipeline based on the collection of manual scripts, each running in its own python environment. The configuration for the parameters from each scripts will be provided from the configuration file in <code>conf/experiments/lightgbm-inferencing.yaml</code>.</p>
<p>Running the python command should open a browser to your workspace opening the experiment view.</p>
<h3 id="running-the-full-benchmark-pipeline">Running the FULL benchmark pipeline</h3>
<p>The configuration we explored above is a reduction of the full benchmark configuration that you will find under <code>conf/experiments/benchmarks/lightgbm-inferencing.yaml</code>. <strong>IMPORTANT</strong>: notice the change of path here, under <code>benchmarks/</code>.</p>
<p>The list in this benchmark config file corresponds to the default settings used when running the <a href="../generate-synthetic-data/">data generation pipeline</a> and the <a href="../benchmark-training/">training benchmark pipeline</a>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>python<span class="w"> </span>src/pipelines/azureml/lightgbm_inferencing.py<span class="w"> </span>--exp-config<span class="w"> </span>conf/experiments/benchmarks/lightgbm-inferencing.yaml
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>In the configuration file, set a distinct unique <code>benchmark_name</code> to be able to analyze the results of <strong>your</strong> run distinctly.</p>
</div>
<h2 id="analyze-the-results-of-a-full-run">Analyze the results of a full run</h2>
<p>WORK IN PROGRESS</p>




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../benchmark-training/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Training" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Training
            </div>
          </div>
        </a>
      
      
        
        <a href="../upload-your-data/" class="md-footer__link md-footer__link--next" aria-label="Next: Upload your data" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Upload your data
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  </body>
</html>